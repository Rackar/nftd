(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"420c":function(e,t,c){"use strict";c("6ffb")},"69b3":function(e,t,c){"use strict";c.r(t);c("e01a"),c("13d5");var n=c("7a23");const a={class:"main-page"},s={class:"row wrap"},l={class:"col-xs-12 col-sm-12 col-md-6"},o={class:"col-xs-12 col-sm-12 col-md-6"},r={class:"right-side"},i={class:"order-title"},u={class:"order-artist"},b={class:"order-artist-info"},d={class:"order-countdown"},m={class:"order-countdown-normal"},O={class:"order-countdown-bold"},j={class:"order-buy-wrap"},f=Object(n["m"])("div",{class:"order-valuation"},"Current Valuation",-1),v={class:"order-number"},p={class:"order-number-eth"},w={class:"order-number-usd"},h={class:"order-buy"},y=Object(n["l"])(" Buy Shares "),g={class:"row"},C={class:"col-xs-12 col-md-12"},Q=Object(n["m"])("div",{class:"about-artist"},"Details",-1),k={class:"about-des"},D={class:"col-xs-12 col-md-12"},T=Object(n["m"])("div",{class:"about-artist"},"Transactions",-1),L=Object(n["m"])("div",{class:"about-artist"},"Comments",-1),_=Object(n["l"])("save"),x={class:"comment-title"},I={class:"comment-name"},B={class:"comment-content"},J=Object(n["m"])("div",null,"How many shares would you like to buy?",-1),q={class:"sell-title"},S={class:"flex"},V=Object(n["l"])("1"),R=Object(n["l"])("10"),N=Object(n["l"])("100"),A=Object(n["l"])("200"),F=Object(n["l"])("500"),P=Object(n["l"])("1000"),H=Object(n["m"])("div",null,"* Only Metamask wallet is support at this moment.",-1);function G(e,t,c,G,M,U){const E=Object(n["J"])("q-carousel-slide"),W=Object(n["J"])("q-btn"),$=Object(n["J"])("q-carousel-control"),z=Object(n["J"])("q-carousel"),K=Object(n["J"])("q-spinner"),X=Object(n["J"])("q-inner-loading"),Y=Object(n["J"])("q-separator"),Z=Object(n["J"])("TransactionRecords"),ee=Object(n["J"])("q-tab-panel"),te=Object(n["J"])("q-input"),ce=Object(n["J"])("q-card"),ne=Object(n["J"])("q-dialog");return Object(n["D"])(),Object(n["i"])("div",a,[Object(n["m"])("div",s,[Object(n["m"])("div",l,[Object(n["m"])("div",null,[Object(n["m"])(z,{class:"left-slide",swipeable:"",animated:"",arrows:"",navigation:"",modelValue:e.slide,"onUpdate:modelValue":t[2]||(t[2]=t=>e.slide=t),fullscreen:e.fullscreen,"onUpdate:fullscreen":t[3]||(t[3]=t=>e.fullscreen=t),infinite:""},{control:Object(n["Q"])((()=>[Object(n["m"])($,{position:"bottom-right",offset:[18,18]},{default:Object(n["Q"])((()=>[Object(n["m"])(W,{push:"",round:"",dense:"",color:"white","text-color":"primary",icon:e.fullscreen?"fullscreen_exit":"fullscreen",onClick:t[1]||(t[1]=t=>e.fullscreen=!e.fullscreen)},null,8,["icon"])])),_:1})])),default:Object(n["Q"])((()=>[(Object(n["D"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(e.current.images,((e,t)=>(Object(n["D"])(),Object(n["i"])(E,{name:t,key:e,"img-src":e},null,8,["name","img-src"])))),128))])),_:1},8,["modelValue","fullscreen"])])]),Object(n["m"])("div",o,[Object(n["m"])("div",r,[Object(n["m"])("div",i,Object(n["L"])(e.current.name),1),Object(n["m"])("div",u,Object(n["L"])(e.current.artistName),1),Object(n["m"])("div",b,Object(n["L"])(e.current.artistInfo),1),Object(n["m"])("div",d,[Object(n["R"])(Object(n["m"])("span",m,"Sale ends in",512),[[n["O"],"Sold Out."!==e.countdownLeft]]),Object(n["m"])("span",O,Object(n["L"])(e.countdownLeft),1)]),Object(n["m"])("div",j,[f,Object(n["m"])("div",v,[Object(n["m"])("span",p,Object(n["L"])(e.weiToCount(e.current.salesRevenue))+" ETH",1),Object(n["m"])("span",w,"($ "+Object(n["L"])((e.weiToCount(e.current.salesRevenue)*e.current.ethPrice).toFixed(2))+")",1)]),Object(n["m"])("div",h,[Object(n["m"])(W,{color:"blue",class:"full-width",onClick:e.buyDnft,disable:e.current.loading||"Sold Out."==e.countdownLeft},{default:Object(n["Q"])((()=>[y,Object(n["m"])(X,{showing:e.current.loading},{default:Object(n["Q"])((()=>[Object(n["m"])(K,{color:"primary",size:"3em",thickness:2})])),_:1},8,["showing"])])),_:1},8,["onClick","disable"])])])])])]),Object(n["m"])("div",null,[Object(n["m"])(Y),Object(n["m"])(ee,{name:"Details"},{default:Object(n["Q"])((()=>[Object(n["m"])("div",g,[Object(n["m"])("div",C,[Q,Object(n["m"])("div",k,Object(n["L"])(e.current.description),1)]),Object(n["m"])("div",D,[T,Object(n["m"])(Z,{buyers:e.current.boughters},null,8,["buyers"])])])])),_:1}),Object(n["m"])(ee,{name:"Commnets"},{default:Object(n["Q"])((()=>[L,Object(n["m"])(te,{modelValue:e.current.commentInput,"onUpdate:modelValue":t[4]||(t[4]=t=>e.current.commentInput=t),filled:"",type:"textarea"},{default:Object(n["Q"])((()=>[e.current.commentInput.length?(Object(n["D"])(),Object(n["i"])(W,{key:0,class:"btn-save",onClick:e.saveComment},{default:Object(n["Q"])((()=>[_])),_:1},8,["onClick"])):Object(n["j"])("",!0)])),_:1},8,["modelValue"]),Object(n["m"])("div",x,Object(n["L"])(e.current.comments.length)+" Comments",1),(Object(n["D"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(e.current.comments,(e=>(Object(n["D"])(),Object(n["i"])("div",{key:e._id,class:"flex"},[Object(n["m"])("div",I,Object(n["L"])(e.userAddress.substr(0,5)+"..."+e.userAddress.substr(-3,5)),1),Object(n["m"])("div",B,Object(n["L"])(e.content),1)])))),128))])),_:1})]),Object(n["m"])(ne,{modelValue:e.current.showBuytab,"onUpdate:modelValue":t[12]||(t[12]=t=>e.current.showBuytab=t)},{default:Object(n["Q"])((()=>[Object(n["m"])(ce,{class:"sell-card"},{default:Object(n["Q"])((()=>[J,Object(n["m"])("div",q,Object(n["L"])(e.current.name),1),Object(n["m"])("div",null,"Current Valuation "+Object(n["L"])(e.weiToCount(e.current.salesRevenue))+" ETH ($ "+Object(n["L"])((e.weiToCount(e.current.salesRevenue)*e.current.ethPrice).toFixed(2))+")",1),Object(n["m"])("div",null,Object(n["L"])(e.current.boughters.reduce(((e,t)=>e+parseInt(t.count)),0))+" shares issued",1),Object(n["m"])(te,{outlined:"",modelValue:e.current.count,"onUpdate:modelValue":t[5]||(t[5]=t=>e.current.count=t),class:"sell-input"},null,8,["modelValue"]),Object(n["m"])("div",S,[Object(n["m"])(W,{class:["sell-input-btn",1==e.current.count?"btn-active":""],onClick:t[6]||(t[6]=t=>e.current.count=1)},{default:Object(n["Q"])((()=>[V])),_:1},8,["class"]),Object(n["m"])(W,{class:["sell-input-btn",10==e.current.count?"btn-active":""],onClick:t[7]||(t[7]=t=>e.current.count=10)},{default:Object(n["Q"])((()=>[R])),_:1},8,["class"]),Object(n["m"])(W,{class:["sell-input-btn",100==e.current.count?"btn-active":""],onClick:t[8]||(t[8]=t=>e.current.count=100)},{default:Object(n["Q"])((()=>[N])),_:1},8,["class"]),Object(n["m"])(W,{class:["sell-input-btn",200==e.current.count?"btn-active":""],onClick:t[9]||(t[9]=t=>e.current.count=200)},{default:Object(n["Q"])((()=>[A])),_:1},8,["class"]),Object(n["m"])(W,{class:["sell-input-btn",500==e.current.count?"btn-active":""],onClick:t[10]||(t[10]=t=>e.current.count=500)},{default:Object(n["Q"])((()=>[F])),_:1},8,["class"]),Object(n["m"])(W,{class:["sell-input-btn",1e3==e.current.count?"btn-active":""],onClick:t[11]||(t[11]=t=>e.current.count=1e3)},{default:Object(n["Q"])((()=>[P])),_:1},8,["class"])]),Object(n["m"])(W,{onClick:e.confirmBuy,label:"Pay with Metamask",class:"btn-confirm"},null,8,["onClick"]),H])),_:1})])),_:1},8,["modelValue"])])}c("e6cf");var M=c("bd4c"),U=c("b3fe");const E={class:"table"},W=Object(n["m"])("div",{class:"table-title"},[Object(n["m"])("div",{class:"table-title-investor"},"Investors"),Object(n["m"])("div",{class:"table-title-bought"},"Bought"),Object(n["m"])("div",{class:"table-title-time"},"Time")],-1),$={class:"table-title-investor"},z={class:"table-title-bought"},K={class:"table-title-time"};function X(e,t,c,a,s,l){return Object(n["D"])(),Object(n["i"])("div",E,[W,(Object(n["D"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(c.buyers,(e=>(Object(n["D"])(),Object(n["i"])("div",{class:"table-content",key:e.id},[Object(n["m"])("div",$,Object(n["L"])(e.Buyer.substr(0,5)+"..."+e.Buyer.substr(-3,5)),1),Object(n["m"])("div",z,Object(n["L"])(e.count),1),Object(n["m"])("div",K,Object(n["L"])(new Date(e.updatedAt).toLocaleString()),1)])))),128))])}var Y={name:"TransactionRecords",props:{buyers:Array},setup(){let e=Object(n["G"])([{key:"11",investor:"0x...117d",bought:40,time:"01.12.2020 / 09:00 am"},{key:"12",investor:"0x...117d",bought:40,time:"01.12.2020 / 09:00 am"},{key:"13",investor:"0x...117d",bought:40,time:"01.12.2020 / 09:00 am"},{key:"14",investor:"0x...117d",bought:40,time:"01.12.2020 / 09:00 am"},{key:"15",investor:"0x...117d",bought:40,time:"01.12.2020 / 09:00 am"}]);return{list:e}}};c("aabf");Y.render=X;var Z=Y,ee=c("e37a"),te=c("a748");const ce=c("99e5");let ne;var ae=Object(n["n"])({name:"NftOrdering",components:{TransactionRecords:Z},props:{nftcontract:{type:String,required:!0},nftid:{type:String,required:!0},dnftid:{type:String,required:!0},active:{type:Boolean}},setup(e){let t=Object(U["a"])(),c=Object(n["G"])(""),a=Object(n["F"])({showBuytab:!1,count:1,loading:!1,boughters:[],comments:[],commentInput:"",images:[],name:"",description:"",artistName:"",artistInfo:"",salesRevenue:"",ethPrice:0});function s(){const e=new ce(window.ethereum),t=new e.eth.Contract(ee["a"],ee["c"]);return t}function l(e=1){return ce.utils.toWei((.001*e).toString())}function o(e){return ce.utils.fromWei(e)}function r(e){clearInterval(ne),e>Date.now()?ne=setInterval((()=>v(e)),1e3):c.value="Sold Out."}function i(){let t=s();return new Promise(((c,n)=>{t.methods.idTodNFT(e.dnftid).call().then((function(e){let{lastBuyTimestamp:t,sellFinishTime:n,salesRevenue:s}=e;if(a.salesRevenue=s,n){let e=new Date(1e3*n);r(e)}else if(t){let e=M["a"].addToDate(new Date(1e3*t),{days:1});r(e)}else{let e=M["a"].addToDate(Date.now(),{days:1});r(e)}c(e)})).catch((e=>{console.log(e)}))}))}function u(e,c=1){let n=s();return a.showBuytab=!1,a.loading=!0,new Promise(((s,o)=>{n.methods.dNFTbuyer(e).send({from:window.ethereum.selectedAddress,value:l(c)}).then((function(e){a.loading=!1,console.log("dNFT buy status: "+JSON.stringify(e)),t.notify("success"),i(),a.boughters.push({Buyer:window.ethereum.selectedAddress,count:c,updatedAt:new Date}),s(e)})).catch((e=>{a.loading=!1,console.log(e)}))}))}async function b(){let t=await te["api"].get("nfts?id="+e.nftid),c=t.data.data;a.name=c.name,a.description=c.description,a.images=[c.image],a.artistName=c.artistName,a.artistInfo=c.artistInfo}async function d(){let e=await te["api"].get("ethprice");a.ethPrice=e.data.data?parseFloat(e.data.data):0}async function m(){try{let t=await te["api"].get("boughters?id="+e.dnftid);a.boughters=t.data.data.filter((e=>"0"!==e.amount)).map((e=>(e.count=o(e.amount),e)))}catch(t){a.boughters=[]}}async function O(){let t=await te["api"].get("comments?id="+e.dnftid);a.comments=t.data.data}async function j(){let t={userAddress:await Object(ee["e"])(),dNFTid:e.dnftid,content:a.commentInput},c=await te["api"].post("comments",{comment:t});1===c.data.status&&(a.comments.push(t),a.commentInput="")}function f(e){let t=Math.floor(e/3600/24),c=Math.floor(e/3600)-24*t,n=Math.floor(e/60)-24*t*60-60*c,a=e-24*t*3600-3600*c-60*n,s=t?t+" ":"";return s+=(c||"00")+":",s+=(n||"00")+":",s+=a,s}function v(e){let t=Date.now(),n=M["a"].getDateDiff(e,t,"seconds");c.value=f(n)}async function p(){await Object(ee["f"])(),a.showBuytab=!0}function w(){u(e.dnftid,a.count)}Object(n["A"])((async()=>{b(),i(),m(),O(),d()}));let h=[{}];return{list:h,slide:Object(n["G"])(0),countdownLeft:c,fullscreen:Object(n["G"])(!1),tab:Object(n["G"])("Details"),current:a,buyDnft:p,confirmBuy:w,saveComment:j,weiToCount:o}}}),se=(c("420c"),c("880c")),le=c("62cd"),oe=c("32a7"),re=c("9c40"),ie=c("74f7"),ue=c("0d59"),be=c("f09f"),de=c("429bb"),me=c("7460"),Oe=c("eb85"),je=c("823b"),fe=c("27f9"),ve=c("24e8"),pe=c("eebe"),we=c.n(pe);ae.render=G;t["default"]=ae;we()(ae,"components",{QCarousel:se["a"],QCarouselSlide:le["a"],QCarouselControl:oe["a"],QBtn:re["a"],QInnerLoading:ie["a"],QSpinner:ue["a"],QCard:be["a"],QTabs:de["a"],QTab:me["a"],QSeparator:Oe["a"],QTabPanel:je["a"],QInput:fe["a"],QDialog:ve["a"]})},"6ffb":function(e,t,c){},aabf:function(e,t,c){"use strict";c("f8ac")},f8ac:function(e,t,c){}}]);