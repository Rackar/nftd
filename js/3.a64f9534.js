(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"3bb0":function(e,t,c){},"4dfd":function(e,t,c){"use strict";c("3bb0")},"82f0c":function(e,t,c){"use strict";c.r(t);var n=c("7a23");function o(e,t,c,o,l,a){const s=Object(n["J"])("Header"),i=Object(n["J"])("router-view"),r=Object(n["J"])("q-page-container"),d=Object(n["J"])("q-layout");return Object(n["D"])(),Object(n["i"])(d,{view:"lHh Lpr lFf"},{default:Object(n["Q"])((()=>[Object(n["m"])(s),Object(n["m"])(r,null,{default:Object(n["Q"])((()=>[Object(n["m"])(i)])),_:1})])),_:1})}const l={class:"row top"},a={class:"left-toolbar"},s=Object(n["m"])("img",{class:"left-image",height:"40",src:"icons/logo@2x.png",alt:"",srcset:""},null,-1),i={class:"right-toolbar"},r={class:"right-title"},d={class:"right-title"},u=Object(n["l"])("About");function b(e,t,c,o,b,m){const O=Object(n["J"])("router-link"),j=Object(n["J"])("ConnectWallet");return Object(n["D"])(),Object(n["i"])("div",null,[Object(n["m"])("section",l,[Object(n["m"])("div",a,[Object(n["m"])(O,{to:"/"},{default:Object(n["Q"])((()=>[s])),_:1})]),Object(n["m"])("div",i,[Object(n["m"])("span",r,[Object(n["m"])(j)]),Object(n["m"])("span",d,[Object(n["m"])(O,{to:"/about"},{default:Object(n["Q"])((()=>[u])),_:1})])])])])}c("ddb0");const m={key:1},O=Object(n["m"])("div",null," NFT ID ",-1),j=Object(n["m"])("div",null,"User address to add whitelist",-1),f={class:"money"},h=Object(n["m"])("div",{class:"title"},"Total Dividends",-1),p={class:"text-grey-8 q-gutter-xs"};function w(e,t,c,o,l,a){const s=Object(n["J"])("q-btn"),i=Object(n["J"])("router-link"),r=Object(n["J"])("q-avatar"),d=Object(n["J"])("q-input"),u=Object(n["J"])("q-card"),b=Object(n["J"])("q-dialog"),w=Object(n["J"])("q-img"),g=Object(n["J"])("q-icon"),y=Object(n["J"])("q-item-section"),C=Object(n["J"])("q-item-label"),T=Object(n["J"])("q-item"),N=Object(n["J"])("q-separator");return Object(n["D"])(),Object(n["i"])(n["a"],null,[e.current.account?(Object(n["D"])(),Object(n["i"])("span",m,[e.current.isOwner?(Object(n["D"])(),Object(n["i"])(s,{key:0,label:"add whitelist",class:"btn-sell",onClick:t[2]||(t[2]=t=>e.current.showAddWhitelist=!0)})):Object(n["j"])("",!0),Object(n["m"])(i,{to:"/createnft"},{default:Object(n["Q"])((()=>[Object(n["m"])(s,{label:"Create NFT",class:"btn-sell"})])),_:1}),Object(n["m"])(s,{onClick:e.wrapToSell,label:"Sell",class:"btn-sell"},null,8,["onClick"]),Object(n["m"])(r,{size:"24px","font-size":"18px",color:"teal","text-color":"white",icon:"person",class:"account-avatar",onClick:t[3]||(t[3]=t=>e.showAccount())}),Object(n["m"])("span",{onClick:t[4]||(t[4]=t=>e.showAccount()),class:"cursor-pointer"},Object(n["L"])(e.acc),1)])):(Object(n["D"])(),Object(n["i"])("span",{key:0,onClick:t[1]||(t[1]=(...t)=>e.connect&&e.connect(...t)),class:"connect"},"Connect Wallet")),Object(n["m"])(b,{modelValue:e.current.sellShow,"onUpdate:modelValue":t[7]||(t[7]=t=>e.current.sellShow=t)},{default:Object(n["Q"])((()=>[Object(n["m"])(u,{class:"nft-sell-card",style:{"border-radius":"15px"}},{default:Object(n["Q"])((()=>[Object(n["m"])("div",null,"NFT contract address (default: "+Object(n["L"])(e.address_721)+")",1),Object(n["m"])(d,{outlined:"",modelValue:e.current.sellNFTaddress,"onUpdate:modelValue":t[5]||(t[5]=t=>e.current.sellNFTaddress=t)},null,8,["modelValue"]),O,Object(n["m"])(d,{outlined:"",modelValue:e.current.sellNFTid,"onUpdate:modelValue":t[6]||(t[6]=t=>e.current.sellNFTid=t)},null,8,["modelValue"]),Object(n["m"])("div",null,"You need to approve this NFT to Filoli Contract Address first: "+Object(n["L"])(e.current.address),1),Object(n["m"])(s,{onClick:e.confirmSell,label:"Confirm"},null,8,["onClick"])])),_:1})])),_:1},8,["modelValue"]),Object(n["m"])(b,{modelValue:e.current.showAddWhitelist,"onUpdate:modelValue":t[10]||(t[10]=t=>e.current.showAddWhitelist=t)},{default:Object(n["Q"])((()=>[Object(n["m"])(u,{class:"nft-sell-card",style:{"border-radius":"15px"}},{default:Object(n["Q"])((()=>[j,Object(n["m"])(d,{outlined:"",modelValue:e.current.inputAddWhitelist,"onUpdate:modelValue":t[8]||(t[8]=t=>e.current.inputAddWhitelist=t)},null,8,["modelValue"]),Object(n["m"])(s,{onClick:t[9]||(t[9]=t=>e.addWhitelist(e.current.inputAddWhitelist)),label:"Confirm"})])),_:1})])),_:1},8,["modelValue"]),Object(n["m"])(b,{modelValue:e.current.showAccount,"onUpdate:modelValue":t[11]||(t[11]=t=>e.current.showAccount=t)},{default:Object(n["Q"])((()=>[Object(n["m"])(u,{class:"mydnft-card",style:{"border-radius":"15px"}},{default:Object(n["Q"])((()=>[Object(n["m"])("div",f,Object(n["L"])(e.current.myTotalClaim.toString().substr(0,7))+" ETH ($"+Object(n["L"])((e.current.myTotalClaim*e.current.ethPrice).toFixed(2))+" )",1),h,(Object(n["D"])(!0),Object(n["i"])(n["a"],null,Object(n["H"])(e.current.myBoughtList,(t=>(Object(n["D"])(),Object(n["i"])("div",{key:t.dNFTid},[Object(n["m"])(T,null,{default:Object(n["Q"])((()=>[Object(n["m"])(y,{avatar:"",top:""},{default:Object(n["Q"])((()=>[t.image?(Object(n["D"])(),Object(n["i"])(w,{key:0,src:t.image,size:"34px"},null,8,["src"])):(Object(n["D"])(),Object(n["i"])(g,{key:1,name:"account_tree",color:"black",size:"34px"}))])),_:2},1024),Object(n["m"])(y,{top:""},{default:Object(n["Q"])((()=>[Object(n["m"])(C,null,{default:Object(n["Q"])((()=>[Object(n["l"])(Object(n["L"])(t.name),1)])),_:2},1024),Object(n["m"])(C,null,{default:Object(n["Q"])((()=>[Object(n["l"])(Object(n["L"])(t.price.substr(0,7))+" eth",1)])),_:2},1024)])),_:2},1024),Object(n["m"])(y,{top:"",side:""},{default:Object(n["Q"])((()=>[Object(n["m"])("div",p,[Object(n["m"])(s,{class:"gt-xs",size:"12px",flat:"",dense:"",label:"claim",onClick:c=>e.claim(t.dNFTid)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024),Object(n["m"])(N,{spaced:""})])))),128))])),_:1})])),_:1},8,["modelValue"])],64)}c("13d5"),c("e6cf");var g=c("4c41"),y=c.n(g),C=c("b3fe"),T=c("cdde"),N=c("e37a"),F=c("a748"),A=c("5502"),Q=c("6c02");const k=c("99e5");var v=Object(n["n"])({name:"ConnectWallet",props:{},setup(e){let t=Object(Q["c"])();const c=Object(C["a"])(),o=Object(A["b"])();function l(){O()}let a=Object(n["F"])({account:"",network:"",myContract:{},sellShow:!1,address:N["c"],sellNFTaddress:N["d"],sellNFTid:"",showAccount:!1,showAddWhitelist:!1,inputAddWhitelist:"",myBoughtList:[],myTotalClaim:0,myNFTs:[],mydnftids:[],thelist:[],isOwner:!1,ethPrice:0}),s=e=>{Object(T["a"])(e).then((()=>{c.notify("Address copyed.")})).catch((()=>{c.notify("Browser not allowed.")}))},i=async()=>{a.sellNFTid=o.state.example.nftIdApproved,a.sellShow=!0},r=async()=>{a.showAccount=!0};async function d(){let e=await F["api"].get("ethprice");a.ethPrice=e.data.data?parseFloat(e.data.data):0}async function u(e){let t=o.state.example.dnfts;if(t.length){a.myBoughtList=[];for(let c=0;c<e.length;c++){const n=e[c];let o=await J(n,a.account),l=t.find((e=>e.dNFTid==n)),s={dNFTid:n,name:l?l.name:"",image:l?l.image:"",myAddress:a.account,price:j(o)};a.myBoughtList.push(s)}a.myTotalClaim=a.myBoughtList.map((e=>parseFloat(e.price))).reduce(((e,t)=>e+t),0)}}Object(n["P"])((()=>o.state.example.dnfts),(()=>{u(a.mydnftids)}));const b=async()=>{let e=await w(a.account);e?await v(a.sellNFTaddress,a.sellNFTid):c.notify("You are not in whitelist yet, contact us please.")};let m=e=>{if(e||(e=window.ethereum),e&&e.isMetaMask&&e.selectedAddress){const t=new k(e),c=new t.eth.Contract(N["a"],N["c"]);a.account=e.selectedAddress,a.network=e.chainId,a.myContract=c,h(),F["api"].get("boughters?uad="+e.selectedAddress).then((async e=>{let t=e.data.data,c=[...new Set(t.map((e=>e.dNFTid)))];a.mydnftids=c,u(c)}))}},O=async()=>{const e=await y()();if(e){const t=await ethereum.request({method:"eth_requestAccounts"});t[0];m(e),e.on("accountsChanged",(function(t){console.log("accountsChanged:"+t),a.account=t[0],m(e)})),e.on("networkChanged",(function(t){console.log("networkChanged:"+t),a.network=t,m(e)}))}else c.notify("Please install MetaMask!")};function j(e){return k.utils.fromWei(e)}let f=async()=>{};function h(){return new Promise(((e,t)=>{console.log(a),a.myContract.methods.owner().call().then((function(t){console.log("owner is: "+JSON.stringify(t)),a.isOwner=t===k.utils.toChecksumAddress(a.account),e(t)})).catch((e=>console.log(e)))}))}async function p(e){if(!e)return c.notify("Must input user address.");let t=await w(e);t?c.notify("aleady in whitelist"):g(e)}function w(e){return new Promise(((t,c)=>{console.log(a),a.myContract.methods.artistWhiteList(e).call().then((function(e){console.log("is in whitelist? "+JSON.stringify(e)),t(e)}))}))}function g(e){return new Promise(((t,c)=>{console.log(a),a.myContract.methods.setArtist(e,!0).send({from:a.account}).then((function(e){console.log("set artist: "+JSON.stringify(e)),t(e)}))}))}function v(e,n){return c.loading.show({message:"Please wait a few seconds..."}),new Promise(((l,s)=>{console.log(a),a.myContract.methods.wrap(e,parseInt(n)).send({from:a.account}).then((function(s){console.log("dNFT: "+JSON.stringify(s)),c.loading.hide(),c.notify("dnft wrapped."),o.commit("example/setNftIdApproved","");let i=`/nft/${e}/${n}/${s.events.TransferSingle.returnValues.id}`;a.sellShow=!1,a.sellNFTid="",t.push(i),l(s)})).catch((e=>{console.log(e),c.loading.hide()}))}))}function J(e,t){return new Promise(((c,n)=>{a.myContract.methods.unClaimOf(e,t).call({from:a.account}).then((function(e){console.log("dNFT claim : "+JSON.stringify(e)),c(e)})).catch((e=>console.log(e)))}))}function S(e){return c.loading.show({message:"Please wait a few seconds..."}),new Promise(((t,n)=>{a.myContract.methods.claim(e).send({from:a.account}).then((function(e){console.log("dNFT claim status: "+JSON.stringify(e)),c.loading.hide(),c.notify("claim success"),a.showAccount=!1,t(e)})).catch((e=>console.log(e)))}))}function _(e,t){return new Promise(((c,n)=>{a.myContract.methods.fundNFT(e).send({from:a.account,value:k.utils.toWei(t.toString())}).then((function(e){console.log("fundNFT status: "+JSON.stringify(e)),c(e)})).catch((e=>console.log(e)))}))}return Object(n["A"])((()=>{m(),d()})),{connect:l,current:a,test:f,acc:Object(n["g"])((()=>a.account.substr(0,5)+"..."+a.account.substr(-3,5))),copyAddress:s,wrapToSell:i,confirmSell:b,address_721:N["d"],addWhitelist:p,fundNFT:_,claim:S,showAccount:r}}}),J=(c("e43c"),c("9c40")),S=c("cb32"),_=c("05c0"),x=c("24e8"),V=c("f09f"),L=c("27f9"),W=c("66e5"),q=c("4074"),P=c("068f"),D=c("0016"),I=c("0170"),B=c("eb85"),U=c("eebe"),M=c.n(U);v.render=w;var z=v;M()(v,"components",{QBtn:J["a"],QAvatar:S["a"],QTooltip:_["a"],QDialog:x["a"],QCard:V["a"],QInput:L["a"],QItem:W["a"],QItemSection:q["a"],QImg:P["a"],QIcon:D["a"],QItemLabel:I["a"],QSeparator:B["a"]});var H={components:{ConnectWallet:z},setup(){return{text:Object(n["G"])(""),ph:Object(n["G"])(""),dense:Object(n["G"])(!1)}}};c("4dfd");H.render=b;var $=H,G=Object(n["n"])({name:"MainLayout",components:{Header:$},setup(){return{}}}),Y=c("4d5a"),E=c("09e3");G.render=o;t["default"]=G;M()(G,"components",{QLayout:Y["a"],QPageContainer:E["a"]})},c36c:function(e,t,c){},e43c:function(e,t,c){"use strict";c("c36c")}}]);